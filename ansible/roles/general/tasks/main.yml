---
- name: apt | upgrade
  apt: update_cache=yes upgrade=full

- name: apt | install packages
  apt: name={{ item }} state=present
  with_items: general.packages

- name: locale | install
  apt: name={{ item }} state=present
  with_items:
    - locales-all

- name: locale | Generate {{ locale }}
  command: /usr/sbin/locale-gen {{ locale }}

- name: locale | Set locale to {{ locale }}
  command: /usr/sbin/update-locale LANG={{ locale }} LC_ALL={{ locale }}

- name: timezone | Set /etc/localtime to {{ timezone }}
  command: /bin/cp /usr/share/zoneinfo/{{ timezone }} /etc/localtime

- name: timezone | Update tzdata
  command: dpkg-reconfigure --frontend noninteractive tzdata

- name: bash | copy .bash_vagrant
  template:
    src=bash_vagrant.j2
    dest=/home/vagrant/.bash_vagrant

- name: bash | register .bash_vagrant
  lineinfile: dest=/home/vagrant/.bashrc line='. ~/.bash_vagrant'
